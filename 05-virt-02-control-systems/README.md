# Домашнее задание к занятию "5.2. Системы управления виртуализацией"

## Задача 1 

Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

Сценарии:

>- 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований  
>Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий 

Microsoft Hyper-V. Весь необходимый функционал доступен сразу, или с установкой System Center Virtual Machine Manager. 
Также не исключена возможность использовать linux и сторонние приложения в инфраструктуре.

>- Требуется наиболее производительное бесплатное opensource решение для виртуализации небольшой (20 серверов) инфраструктуры Linux и Windows виртуальных машин

Виртуализация на основе KVM с системой управления - Proxmox, Virt Manager. Opensource и максимальная производительность.

>- Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры 

Для Windows инфраструктуры лучше всего подходит Hyper-V.

>- Необходимо рабочее окружение для тестирование программного продукта на нескольких дистрибутивах Linux

Возможно, это зависит от самого приложения, но для тестовой среды подойдут docker, либо Vagrant + Virtualbox.


## Задача 2

>Опишите сценарий миграции с VMware vSphere на Hyper-V для Linux и Windows виртуальных машин. Детально опишите необходимые шаги для использования всех преимуществ Hyper-V для Windows.

В общем случае, System Center Virtual Machine Manager позволяет выполнить миграцию как windows, так и linux виртуальных машин.
На ВМ нужно удалить vmware tools, для linux нужно убедиться в наличии Linux Integration Services. После чего выключить ВМ, скопировать файлы ВМ или предоставить доступ к ним, и запустить мастер VMM.
Далее, следуя указаниям мастера, выбрать файлы ВМ, при необходимости уточнить имя и параметры, выбрать новое место хранения ВМ, параметры сети и запуска ВМ.  
    Если действовать вручную, не прибегая к помощи VMM, то после выключения ВМ в гипервизоре vmware нужно преобразовать файл диска vmdk в vhd, используя, например, starwind v2v.
После чего создать в Hyper-V новую ВМ, указав использовать в качестве диска полученный vhd. Настроить остальные параметры и сеть.


## Задача 3 

>Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был бы выбор, то создавали ли вы бы гетерогенную среду или нет? Мотивируйте ваш ответ примерами. 

Основные недостатки:  
- Различные системы управления. Вместо одной сводной консоли придется работать с несколькими.  
- Увеличение числа разных программ для обслуживания, бэкапов.  
- Более сложная миграция ВМ, невозможность живой миграции между разными системами.  
- Бэкап и восстановление в другой среде.  
- Для каждой среды придется делать свои шаблоны типовых ВМ.  

Избавиться или минимизировать эти проблемы не всегда возможно. Например, обновления все равно придется устанавливать на все системы виртуализации.
Сервисы high availability придется дублировать. В остальном - стремиться к унификации, если перейти к какой-то одной системе невозможно.  

Я бы предпочел работать в единой среде. Небольшие выгоды в цене и производительности при использовании разных ведут к большим издержкам и неоправданы.


